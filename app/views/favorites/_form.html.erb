<% favorite = Favorite.find_by(user: current_user, post: @post) %>
  <% if current_user && user_signed_in? %>
    <% if favorite.present? %>
      <%= link_to 'Unfavorite', post_favorite_path(@post, favorite),
                                method: :delete,
                                remote: true %>
    <% else %>
      <%= link_to 'Favorite', post_favorites_path(@post),
                              method: :post,
                              remote: true %>
    <% end %>
<% end %>
